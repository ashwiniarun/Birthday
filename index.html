<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday üéÇ</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lora:ital@0;1&display=swap" rel="stylesheet">
<style>
  :root {
    --cream: #fdf6ee;
    --blush: #f2c4c4;
    --rose: #d4748a;
    --wine: #8b3a52;
    --gold: #c9a84c;
    --text: #3a2a2e;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    background: var(--cream);
    font-family: 'Lora', serif;
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
    background-image:
      radial-gradient(ellipse at 20% 20%, rgba(242,196,196,0.3) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 80%, rgba(168,185,160,0.25) 0%, transparent 50%);
  }

  /* ‚îÄ‚îÄ ENVELOPE ‚îÄ‚îÄ */
  #envelope-screen {
    position: fixed; inset: 0;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    z-index: 100;
    transition: opacity 0.8s ease, transform 0.8s ease;
  }
  #envelope-screen.hide { opacity:0; transform:scale(0.85) translateY(-30px); pointer-events:none; }

  .envelope-hint {
    font-family: 'Playfair Display', serif; font-style: italic;
    color: var(--wine); opacity: 0.7; margin-bottom: 28px;
    font-size: 1rem; letter-spacing: 0.05em;
    animation: float 3s ease-in-out infinite;
  }
  .envelope-wrap {
    cursor: pointer;
    filter: drop-shadow(0 20px 40px rgba(139,58,82,0.2));
    transition: transform 0.3s ease, filter 0.3s ease;
  }
  .envelope-wrap:hover { transform: translateY(-6px) scale(1.02); filter: drop-shadow(0 30px 50px rgba(139,58,82,0.3)); }

  .envelope { width:320px; height:220px; position:relative; }
  .env-body {
    position:absolute; inset:0;
    background: linear-gradient(160deg,#f8e8d0,#f2d8c0);
    border-radius:4px 4px 10px 10px;
    border:1.5px solid rgba(201,168,76,0.4);
  }
  .env-flap {
    position:absolute; top:0; left:0; right:0; height:0;
    border-left:160px solid transparent; border-right:160px solid transparent;
    border-top:130px solid #e0c8a8;
    transform-origin:top center;
    transition: transform 0.7s cubic-bezier(0.4,0,0.2,1); z-index:4;
  }
  .envelope-wrap:hover .env-flap { transform:rotateX(40deg); }
  .wax-seal {
    position:absolute; top:104px; left:50%; transform:translateX(-50%);
    width:52px; height:52px;
    background:radial-gradient(circle at 40% 35%,#c1405a,#8b3a52);
    border-radius:50%; display:flex; align-items:center; justify-content:center;
    font-size:22px; box-shadow:0 4px 12px rgba(139,58,82,.4); z-index:5;
  }

  /* ‚îÄ‚îÄ CONFETTI ‚îÄ‚îÄ */
  #confetti-canvas { position:fixed; inset:0; pointer-events:none; z-index:200; }

  /* ‚îÄ‚îÄ CARD SCREEN ‚îÄ‚îÄ */
  #card-screen {
    min-height:100vh; display:flex; flex-direction:column;
    align-items:center; padding:60px 20px 80px;
    opacity:0; transform:translateY(40px); pointer-events:none;
    transition:opacity 0.9s ease 0.4s, transform 0.9s ease 0.4s;
  }
  #card-screen.show { opacity:1; transform:translateY(0); pointer-events:all; }

  .card-header { text-align:center; margin-bottom:60px; }
  .card-header h1 {
    font-family:'Playfair Display',serif;
    font-size:clamp(2.8rem,6vw,5rem); font-weight:700;
    color:var(--wine); line-height:1.1;
  }
  .card-header h1 span { font-style:italic; color:var(--gold); }
  .card-header .sub { margin-top:12px; font-style:italic; color:var(--rose); font-size:1.05rem; opacity:.85; }
  .card-header .div { margin:18px auto 0; width:80px; height:2px; background:linear-gradient(90deg,transparent,var(--gold),transparent); }

  /* ‚îÄ‚îÄ 3D COVERFLOW ‚îÄ‚îÄ */
  .carousel-wrapper {
    position:relative;
    width:min(860px,98vw);
    margin:0 auto;
    padding:0 70px;
  }
  .carousel-scene {
    perspective:1400px;
    width:100%; height:460px;
    display:flex; justify-content:center; align-items:center;
    position:relative; overflow:visible;
  }
  .carousel-track {
    position:relative;
    width:280px; height:380px;
    transform-style:preserve-3d;
  }
  .photo-card {
    position:absolute; width:280px; height:380px; top:0; left:0;
    cursor:pointer; transform-style:preserve-3d;
    will-change:transform,opacity;
  }
  .photo-card-inner {
    width:100%; height:100%; position:relative;
    transform-style:preserve-3d;
    transition:transform 0.7s cubic-bezier(0.4,0,0.2,1);
    border-radius:16px;
  }
  .photo-card.flipped .photo-card-inner { transform:rotateY(180deg); }

  .card-front, .card-back {
    position:absolute; inset:0;
    backface-visibility:hidden;
    border-radius:16px; overflow:hidden;
  }
  .card-front {
    background:white; padding:10px 10px 48px;
    display:flex; flex-direction:column;
    box-shadow:0 24px 64px rgba(58,42,46,.28), 0 4px 16px rgba(58,42,46,.1);
  }
  .card-front .photo-img { width:100%; flex:1; background-size:cover; background-position:center; border-radius:10px; }
  .card-front .photo-name {
    text-align:center; font-family:'Playfair Display',serif;
    font-size:.95rem; color:var(--text); margin-top:10px; letter-spacing:.05em; opacity:.8;
  }
  .card-back {
    background:linear-gradient(150deg,#fdf0f5,#fce8ee);
    transform:rotateY(180deg);
    padding:30px 24px;
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    border:1.5px solid rgba(212,116,138,.25);
    box-shadow:0 24px 64px rgba(58,42,46,.28);
  }
  .card-back .back-heart { font-size:1.8rem; margin-bottom:14px; color:var(--rose); }
  .card-back .back-msg {
    font-family:'Lora',serif; font-style:italic;
    font-size:.95rem; line-height:1.7; color:var(--wine); text-align:center;
  }
  .card-back .back-from {
    margin-top:18px; font-family:'Playfair Display',serif;
    font-size:.8rem; color:var(--rose); letter-spacing:.06em;
  }
  .card-back::before,.card-back::after { content:'‚úø'; position:absolute; font-size:13px; color:var(--blush); opacity:.8; }
  .card-back::before { top:11px; left:13px; }
  .card-back::after  { bottom:11px; right:13px; transform:rotate(180deg); }

  .nav-btn {
    position:absolute; top:50%; transform:translateY(-50%);
    width:54px; height:54px; border-radius:50%;
    background:white; border:1.5px solid rgba(212,116,138,.3);
    color:var(--rose); font-size:1.6rem; cursor:pointer;
    display:flex; align-items:center; justify-content:center;
    box-shadow:0 4px 20px rgba(139,58,82,.14);
    transition:all .25s; z-index:30;
  }
  .nav-btn:hover { background:var(--blush); border-color:var(--rose); transform:translateY(-50%) scale(1.1); }
  .nav-prev { left:0; }
  .nav-next { right:0; }

  .dot-nav { display:flex; gap:8px; margin-top:28px; justify-content:center; }
  .dot { width:8px; height:8px; border-radius:50%; background:var(--blush); cursor:pointer; transition:all .3s; }
  .dot.active { background:var(--wine); transform:scale(1.3); }

  .active-label {
    margin-top:14px; text-align:center;
    font-family:'Playfair Display',serif; font-style:italic;
    font-size:1.05rem; color:var(--wine); letter-spacing:.04em; min-height:1.4em;
  }
  .click-hint { margin-top:8px; font-style:italic; font-size:.82rem; color:var(--rose); opacity:.65; text-align:center; }

  .footer-msg { margin-top:70px; text-align:center; max-width:480px; }
  .footer-msg p { font-family:'Playfair Display',serif; font-style:italic; font-size:1.3rem; color:var(--wine); line-height:1.6; }
  .footer-msg .flowers { margin-top:16px; font-size:1.4rem; letter-spacing:6px; opacity:.6; }

  .floater { position:fixed; pointer-events:none; font-size:1.2rem; opacity:0; animation:floatUp linear infinite; }

  @keyframes floatUp {
    0%   { transform:translateY(100vh) rotate(0deg); opacity:0; }
    10%  { opacity:.4; }
    90%  { opacity:.2; }
    100% { transform:translateY(-10vh) rotate(360deg); opacity:0; }
  }
  @keyframes float {
    0%,100% { transform:translateY(0); }
    50%     { transform:translateY(-8px); }
  }
</style>
</head>
<body>

<canvas id="confetti-canvas"></canvas>

<div id="envelope-screen">
  <p class="envelope-hint"> a little something for you </p>
  <div class="envelope-wrap" onclick="openEnvelope()">
    <div class="envelope">
      <div class="env-body">
        <div class="env-deco"></div>
        <div class="env-stamp"></div>
      </div>
      <div class="env-fold-l"></div>
      <div class="env-fold-r"></div>
      <div class="env-flap"></div>
      <div class="wax-seal">üéÇ</div>
    </div>
  </div>
</div>

<div id="card-screen">
  <div class="card-header">
    <h1>Happy <span>Birthday</span></h1>
    <p class="sub">from everyone who loves you</p>
    <div class="div"></div>
  </div>

  <div class="carousel-wrapper">
    <div class="carousel-scene">
      <div class="carousel-track" id="track"></div>
    </div>
    <button class="nav-btn nav-prev" onclick="step(-1)">&#8249;</button>
    <button class="nav-btn nav-next" onclick="step(1)">&#8250;</button>
  </div>

  <div class="dot-nav" id="dots"></div>
  <div class="active-label" id="active-label"></div>
  <p class="click-hint">‚ú¶ click the front card to flip &amp; read their message ‚ú¶</p>

  <div class="footer-msg">
    <p>"Here's to another year, unc"</p>
    <div class="flowers">‚úø ‚ùÄ ‚úø ‚ùÄ ‚úø</div>
  </div>
</div>

<script>
const photos = [
  {name:"Ashwini", img:"ashwini.jpeg", message:"Happy Birthday Dhruv!! I hope you enjoy this slideshow I made for you hehe. You're so much older than me, it's gross. I love you sooo much unc!"},  
  { name:"Akshat",       img:"akshat.png", message:"Give me my shirt back. Love you brother, keep me in your heart and mind going forward in life" },
  { name:"Rachel", img:"rachel.JPG", message:"HAPPY BIRTHDAY DHRUV !! vv grateful to have met u and ty for being such a good friend üôÇ‚Äç‚ÜïÔ∏èüôÇ‚Äç‚ÜïÔ∏è #hags" },
  { name:"Chirag",       img:"chirag.jpg", message:"Happy Birthday Dhruv! Im so proud to call you a friend, and I have an Ennis shaped hole in life rn, so we have a lotta catching up to do when we meet again. Love you to the moon" },
  { name:"Sri",  msgSize:"0.63rem",    img:"Sri.JPG", message:"Dhruv Kanna, \n Happy birthday beta \n Youve been a wonderful older brother to me these past 2 years. Thank you for teaching me, helping me through things and making wonderful memories with me. Our relationship is like a mentally challenged son and even more challenged father. Your mindset and maturity (nonexistent) has taught me so much and helped me lead myself in life and academically. Your beautiful face and bunda had marked a very integral part of my life and in college and I know we'll love each other again. \n Love Sri" },
  { name:"Anindya",img:"mm6.jpeg", audio: "anindya.mp3", msgSize:"0.40rem", message:"oh boy oh boy. where do i begin. my pookie bear. dhruvy. from the days i first laid eyes on you.\niInever knew that some fuckin new kid who i used for math answers in math class during 8be would become the person who showed me that telepathic communication is real. im technically supposed to limit this to 1 memory but ive grew up with you so unfortunately thats not gonna happen. \n the pure, absolute retardation that we did during eighth grade is stuff that i'm gonna tell my kids. autism points were actually the culmination of comedy at that time and i genuinely respected, and would abuse, how much u would do. the 100th point was ‚Äòhit a vape‚Äô tho üíÄ there‚Äôs a fuck ton of stuff that i could say here but i don‚Äôt know how much ashwini knows so [redacted] (have fun explaining this, im doing it on purpose for telling dustin that i liked chloe in 8th grade chem) \n speaking of birthdays, let‚Äôs talk about mine. go fuck yourself. today is just a random monday to me. \n suddenly college came and freshman year was hella fuckin fun. blaisdell lounge was probably the most radioactive toxic environment that i‚Äôve ever been in and it genuinely surprises me how much retardation was in a room at the same time. i remember when you took my keys and i used your i card as a spoon for my yogurt and then we basically started raping each other (i‚Äôll see if i can find a photo for this). i also remember that time that your retarded ass got us stuck in the elevator right before break because ‚Äòit‚Äôll be an experience‚Äô also the first time i ever got high. \n sophomore year was when i was basically convinced that we could communicate telepathically. and this specially happened when for some reason, it sounded like two dhruvs were coming down the stairs ü§î still can‚Äôt figure that out and i was chilling on the couch. i know that we were thinking the exact same thing but i didn‚Äôt even need to look up to start laughing. junior year with mo and sunny was so fucking fun too bro and perkins mondays too like the more i think about it, almost every single time i burst out laughing in my life was with you and thats too frequent to be random. \n there‚Äôs wayyyy too many stories that we have together and i could write a book with them. \n thanks for being the closest thing i‚Äôve had to a brother. more life üôèüèæ" },
  { name:"Aashka",       img:"aashka.JPG", message:"happy birthday dhruv! have such an amazing day and year! cant wait to hear all about the new job and how cali is treating you! im so thankful for the mems from happies, halloween, and hopefully many many more in the future!" },
  { name:"Akshaya",       img:"akshaya.JPG", message:"Happy birthday twin thanks for always being a real one. I hope this birthday gives u funnier jokes and hope we can all make more mems!! Have a great bday hope all ur wishes come true!" },
  { name:"Shreni",       img:"OtYmDc5SS-2iXZeRAbZ4OA.jpg", message:"Happy birthday dhruv!! u were maybe like a little bit funny during college. hope u dont die on ur motorcycle this year and make it to 23! hope u have an amazing time in LA though!" },
  { name:"Vineetha",       img:"vineetha.jpg", message:"Happy birthday Dhruv have a great day!! thanks for being a great friend whos always making the ‚Äúfunniest‚Äù jokes. cant wait to come to yours and ashwinis wedding " },
  { name:"Shuban",       img:"shuban.jpeg", message:"hbd dhruv!! hope you have a great year ahead, keep on being your own #1 supporter ü´°" },
  {name:"Henry", img:"henry.JPG", message:"Happy birthday, I hope you have fun in cali and make Elon musk proud!"},
  {name:"Dillan", img:"dillan2.jpeg", message:"Happy Birthday brother, hope LA is treating you well. You‚Äôve come a long way since that maid outfit senior year, I sense an arc reactor coming soon. Hope you have a great one! "},
  {name: "Al", img:"al.jpeg", message: "Happy birthday to my favorite Elon minion !!!"},  
  {name: "Mo", msgSize:"0.60rem", img:"mo.jpeg", message:"happy birthday pooks ü•≥.  highk I'm tryna travel internationally. ooh and baldursd you more appreciation back in school. you highk carried me through ece and you're honestly a main reason I was even able to stick it out to the end. thank you for always initiating. thank you for always welcoming me to any activity or friend group. thank you for always making me feel included. thank you for just being one of the kindest and best friends I've ever had. I always enjoy talking to you and hearing your perspectives. I'm so lucky we were in the same dorms. and frickin calc 3 honors. I regret not spending more time with you üòî. so thank you. I appreciate you always \n hopefully SpaceX isn't destroying you too bad, I'll be sure to visit LA as soon as I can. I'm highk better than you at bball now ü•±. and we can boulder at an actual climbing gym this time. orrr Japan trip?? highk I'm tryna travel internationally. ooh and baldurs gate. call again soon anyways. love you bro"},
  {name:"more mems",       video:"IMG_1914.mp4", message:"from rachel" },
  {name:"", video:"akshaya.mp4", message:"from akshaya"},
  {name:"",       img:"mm1.jpeg", message:"from anindya" },
  {name:"",       img:"mm2.png", message:"from anindya" },
  {name:"",       img:"mm3.png", message:"from anindya" },
  {name:"",       img:"mm4.JPG", message:"from anindya" },
  {name:"",       img:"mm5.jpeg", message:"from anindya" },
  {name:"", video:"shreni.mp4", message:"from shreni"},
  {name:"", img:"100_0019.JPG", message:"from shreni"},
  {name:"", img:"100_0769.JPG", message:"from shreni"},
  {name:"", img:"100_1120.JPG", message:"from shreni"},
  {name:"", img:"100_2507.JPG", message:"from shreni"},
  {name:"", img:"100_2633 copy.jpeg", message:"from shreni"},
  {name:"", img:"shreni.JPG", message:"from shreni"},
  {name:"", img:"anindya.JPG", message:"from shreni"},
  {name:"", video:"mo.mp4", message:"from mo"},
  {name:"", img:"mo1.jpeg", message:"from mo"}
];

const N = photos.length;
let current = 0;

const track   = document.getElementById('track');
const dotsEl  = document.getElementById('dots');
const labelEl = document.getElementById('active-label');

photos.forEach((p, i) => {
  const card = document.createElement('div');
  card.className = 'photo-card';
  card.id = `card-${i}`;
  card.innerHTML = `
    <div class="photo-card-inner">
      <div class="card-front">
        ${p.video
  ? `<video class="photo-img" src="${p.video}" autoplay loop muted playsinline style="object-fit:cover; border-radius:10px;"></video>`
  : `<div class="photo-img" style="background-image:url('${p.img}')"></div>`
}
        <div class="photo-name">${p.name}</div>
${p.audio ? `
  <button onclick="event.stopPropagation(); toggleAudio(this, '${p.audio}')"
    style="margin:8px auto 0; display:flex; align-items:center; gap:6px;
           background:linear-gradient(135deg,#f2c4c4,#d4748a); border:none;
           border-radius:20px; padding:6px 14px; cursor:pointer;
           font-family:'Playfair Display',serif; font-style:italic;
           font-size:0.72rem; color:white; letter-spacing:0.03em;
           box-shadow:0 2px 8px rgba(139,58,82,0.25);">
    <span>‚ñ∂</span> <span>voice note</span>
  </button>` : ''}
      </div>
      <div class="card-back">
        <div class="back-heart">‚ù§</div>
        <div class="back-msg" style="${p.msgSize ? `font-size:${p.msgSize};line-height:1.5;` : ''}">${p.message}</div>
        <div class="back-from">‚Äî ${p.name}</div>
      </div>
    </div>`;

  card.addEventListener('click', () => {
    const off = getOff(i);
    if (off === 0) card.classList.toggle('flipped');
    else if (Math.abs(off) <= 1) { current = i; applyCarousel(); }
  });
  track.appendChild(card);

  const dot = document.createElement('div');
  dot.className = 'dot' + (i === 0 ? ' active' : '');
  dot.onclick = () => { current = i; applyCarousel(); };
  dotsEl.appendChild(dot);
});

function getOff(i) {
  let o = i - current;
  if (o >  N/2) o -= N;
  if (o < -N/2) o += N;
  return o;
}

function applyCarousel() {
  photos.forEach((_, i) => {
    if (i !== current) document.getElementById(`card-${i}`).classList.remove('flipped');
  });

  photos.forEach((_, i) => {
    const card = document.getElementById(`card-${i}`);
    const off  = getOff(i);
    const abs  = Math.abs(off);
    const sgn  = Math.sign(off);

    // Core 3D coverflow transform
    const SPREAD = 175;
    const tx      = abs === 0 ? 0 : sgn * (SPREAD + (abs - 1) * 55);
    const ry      = abs === 0 ? 0 : -sgn * Math.min(abs * 46, 62);
    const scale   = abs === 0 ? 1.0 : Math.max(0.52, 0.82 - (abs - 1) * 0.12);
    const opacity = abs === 0 ? 1   : abs === 1 ? 0.72 : Math.max(0, 0.48 - (abs - 2) * 0.22);
    const blur    = abs <= 1  ? 0   : (abs - 1) * 1.5;
    const z       = 20 - abs;

    card.style.cssText = `
      transform: translateX(${tx}px) rotateY(${ry}deg) scale(${scale});
      z-index: ${z};
      opacity: ${opacity};
      filter: ${blur ? `blur(${blur}px)` : 'none'};
      pointer-events: ${abs <= 1 ? 'all' : 'none'};
      transition: transform .7s cubic-bezier(.4,0,.2,1), opacity .7s ease, filter .5s ease;
    `;
  });

  document.querySelectorAll('.dot').forEach((d, i) => d.classList.toggle('active', i === current));
  labelEl.textContent = photos[current].name;
}

function step(dir) {
  current = ((current + dir) % N + N) % N;
  applyCarousel();
}

// Touch / keyboard
let t0 = 0;
const scene = document.querySelector('.carousel-scene');
scene.addEventListener('touchstart', e => { t0 = e.touches[0].clientX; }, { passive:true });
scene.addEventListener('touchend',   e => { const dx = e.changedTouches[0].clientX - t0; if (Math.abs(dx) > 40) step(dx < 0 ? 1 : -1); });
document.addEventListener('keydown', e => {
  if (e.key === 'ArrowLeft')  step(-1);
  if (e.key === 'ArrowRight') step(1);
  if (e.key === ' ' || e.key === 'Enter') document.getElementById(`card-${current}`).classList.toggle('flipped');
});

applyCarousel();

// ‚îÄ‚îÄ CONFETTI ‚îÄ‚îÄ
const canvas = document.getElementById('confetti-canvas');
const ctx = canvas.getContext('2d');
let pieces = [];
function sz() { canvas.width = innerWidth; canvas.height = innerHeight; }
sz(); addEventListener('resize', sz);
const COLS = ['#f2c4c4','#d4748a','#8b3a52','#c9a84c','#a8b9a0','#f9e4b7','#e8a0b0'];

function launchConfetti() {
  pieces = Array.from({length:220}, () => ({
    x: Math.random()*canvas.width, y: -10 - Math.random()*220,
    s: 5+Math.random()*9, c: COLS[Math.random()*COLS.length|0],
    r: Math.random()>.4, spd:2+Math.random()*4,
    drift:(Math.random()-.5)*1.5, rot:Math.random()*Math.PI*2,
    rs:(Math.random()-.5)*.15, op:1
  }));
  drawC();
}
function drawC() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  let alive = false;
  pieces.forEach(p => {
    p.y+=p.spd; p.x+=p.drift; p.rot+=p.rs;
    if (p.y > canvas.height*.72) p.op-=.013;
    if (p.op > 0) alive = true;
    ctx.save(); ctx.globalAlpha=Math.max(0,p.op);
    ctx.translate(p.x,p.y); ctx.rotate(p.rot); ctx.fillStyle=p.c;
    if (p.r) ctx.fillRect(-p.s/2,-p.s/4,p.s,p.s/2);
    else { ctx.beginPath(); ctx.arc(0,0,p.s/2,0,Math.PI*2); ctx.fill(); }
    ctx.restore();
  });
  if (alive) requestAnimationFrame(drawC);
  else ctx.clearRect(0,0,canvas.width,canvas.height);
}

function openEnvelope() {
  document.getElementById('envelope-screen').classList.add('hide');
  setTimeout(() => {
    launchConfetti();
    document.getElementById('card-screen').classList.add('show');
    spawnFloaters();
  }, 600);
}

function spawnFloaters() {
  const e = ['üå∏','‚úø','‚ùÄ','üå∑','‚ú®','üíï','üéÄ'];
  for (let i=0; i<14; i++) {
    const el = document.createElement('div');
    el.className = 'floater';
    el.textContent = e[Math.random()*e.length|0];
    el.style.left = Math.random()*100+'vw';
    el.style.animationDuration = (8+Math.random()*14)+'s';
    el.style.animationDelay   = (Math.random()*12)+'s';
    el.style.fontSize = (.8+Math.random()*.8)+'rem';
    document.body.appendChild(el);
  }
}

let currentAudio = null;
function toggleAudio(btn, src) {
  if (currentAudio && !currentAudio.paused) {
    currentAudio.pause();
    currentAudio.currentTime = 0;
    btn.querySelector('span').textContent = '‚ñ∂';
    if (currentAudio._src === src) { currentAudio = null; return; }
  }
  const audio = new Audio(src);
  audio._src = src;
  currentAudio = audio;
  btn.querySelector('span').textContent = '‚èπ';
  audio.play();
  audio.onended = () => { btn.querySelector('span').textContent = '‚ñ∂'; };
}
</script>
</body>
</html>